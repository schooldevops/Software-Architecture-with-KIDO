# SideCar and Ambassador Pattern

Sidecar and Ambassador는 마이크로서비스 아키텍처에서 사용되는 패턴 중 하나입니다.

Sidecar 패턴은 각 서비스 인스턴스와 함께 배포되는 작은 프록시 애플리케이션인 Sidecar를 사용하여 각 서비스 인스턴스의 기능을 확장하고 구현하는 방법입니다. Sidecar는 인접한 서비스와 통신하며, 일반적으로 동일한 호스트에서 실행됩니다. Sidecar는 대상 서비스의 호출을 캡슐화하고, 이를 모니터링하고, 인증 및 보안 등을 제공하며, 로드 밸런싱 및 서비스 디스커버리와 같은 추가 기능을 제공합니다.

Ambassador 패턴은 Sidecar 패턴과 유사하지만, 대신 Ambassador가 주요 서비스 인스턴스 옆에 배치되어 서비스의 진입점으로 작동합니다. 주요 서비스는 전용 백엔드로 사용되며, Ambassador는 서비스의 프록시 역할을 합니다. 주요 서비스는 서비스 로직을 구현하는 데만 집중하고, Ambassador는 클라이언트와의 상호 작용을 관리하고 서비스 인스턴스에서 호출을 중개합니다.

Sidecar와 Ambassador 패턴의 주요 장점은 다음과 같습니다.

서비스 인스턴스 간의 통신을 안전하고 효율적으로 유지할 수 있습니다.
서비스 간 인증, 로드 밸런싱, 서비스 디스커버리, 트래픽 관리 및 모니터링과 같은 공통 기능을 쉽게 구현할 수 있습니다.
기존 애플리케이션에 대한 변경 없이 쉽게 구성할 수 있습니다.
대표적인 예로는 Netflix의 Eureka, Consul, Istio 등이 있으며, 베스트 프랙티스는 다음과 같습니다.

Sidecar 및 Ambassador가 서비스 인스턴스에 필요한 최소한의 부하와 대역폭을 사용해야 합니다.
Sidecar 및 Ambassador의 로그, 모니터링 및 보안 상의 이슈를 고려해야 합니다.
적절한 방식으로 프록시를 구성하여 서비스 간의 안정적인 통신을 보장해야 합니다.

-----------------------------------------------

Sidecar and Ambassador pattern은 분산 시스템에서 서비스 디스커버리, 로드밸런싱, 인증 및 인가, 보안 등과 같은 일부 기능을 분리된 서비스로 분리하는 패턴입니다. 이러한 패턴은 서비스 메시와 함께 사용되는 경우가 많습니다.

Sidecar pattern은 각 서비스 인스턴스에 대해 별도의 sidecar 프로세스가 배치되는 것을 의미합니다. 이 sidecar는 주 서비스 인스턴스와 동일한 호스트에서 실행되며 해당 서비스 인스턴스와 같은 네트워크 또는 호스트 공간에서 실행됩니다. 이 sidecar는 서비스 인스턴스가 실행될 때 같이 시작되며, 주 서비스와 함께 종료됩니다.

Ambassador pattern은 프록시를 사용하여 각 서비스 인스턴스를 보호하고, 로드밸런싱, 인증, 인가 및 SSL 종료 등과 같은 기능을 제공하는 것을 의미합니다. 이 패턴은 서비스 디스커버리 시스템과 함께 사용됩니다. Ambassador는 엣지 라우터 또는 게이트웨이의 역할을 합니다.

대표적인 예시로는 Netflix에서 사용하는 Zuul이나 Kubernetes에서 사용하는 Istio와 같은 서비스 메시 프레임워크에서 이러한 패턴이 사용됩니다.

이러한 패턴의 장점은 다음과 같습니다.

각 서비스는 자체적으로 구성되며, 이를 담당하는 sidecar 및 ambassador는 이를 별도로 처리합니다.
시스템의 기능을 확장하거나 변경할 때, sidecar 및 ambassador와 같은 작은 구성 요소만 변경하면 됩니다.
새로운 기능을 추가하거나 기존 기능을 변경할 때, 모든 서비스를 수정하지 않고도 sidecar 및 ambassador를 통해 구성할 수 있습니다.
그러나 이러한 패턴은 성능에 악영향을 줄 수 있으며, 추가적인 복잡성을 초래할 수 있습니다. 따라서 이러한 패턴은 적절한 상황에서 사용하는 것이 좋습니다.

