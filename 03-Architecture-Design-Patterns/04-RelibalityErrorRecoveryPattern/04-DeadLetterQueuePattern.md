# Dead Letter Queue Pattern

Dead Letter Queue Pattern (DLQ)은 메시지 브로커에서 메시지 처리 실패 시 해당 메시지를 재처리할 수 있도록 대기시켜놓는 큐이다. 이 패턴은 분산 시스템에서 메시지 처리 중 발생할 수 있는 장애나 에러를 처리하는 데에 유용하다.

예를 들어, 메시지 브로커에서 메시지를 처리하는 도중 해당 메시지를 처리할 수 없는 경우 해당 메시지는 DLQ로 이동된다. 그 후, DLQ에서 해당 메시지를 재처리할 수 있다. 이러한 방식으로, 장애가 발생했을 때 해당 메시지를 유실하지 않고 다시 처리할 수 있도록 보장할 수 있다.

대표적인 예시로는 아마존 SQS (Simple Queue Service)에서 DLQ를 사용할 수 있다. 베스트 프랙티스로는, DLQ에서 메시지 처리가 반복해서 실패하는 경우에는 사람의 개입이 필요할 수 있으므로, 이러한 상황에 대비하여 모니터링 도구를 이용하여 관련 인원에게 알림을 보내는 것이 좋다. 또한, DLQ에서 메시지를 재처리할 때는 메시지의 원인에 대한 분석이 필요하며, 해당 원인에 대한 수정 작업을 수행해야 한다.

---------------------------------

Dead Letter Queue (DLQ) 패턴은 메시지 브로커나 메시징 시스템에서 처리할 수 없는 메시지를 따로 큐로 보내어 처리하는 디자인 패턴입니다.

일반적으로 메시지 브로커나 메시징 시스템에서 메시지를 처리하다가 예기치 못한 에러가 발생하거나 메시지를 처리할 수 없는 상황이 발생할 수 있습니다. 이러한 상황에서 메시지는 일반적으로 버려지기 때문에 해당 메시지를 재처리할 수 있는 기회를 잃게 됩니다. DLQ 패턴은 이러한 메시지를 버리지 않고 다시 처리할 수 있도록 하기 위해 따로 큐를 두어 해당 메시지를 보관하는 것입니다.

대표적인 예시로는 Amazon SQS에서 제공하는 Dead Letter Queue 기능이 있습니다. 베스트 프랙티스로는 다음과 같은 것들이 있습니다.

적절한 재시도 횟수와 타임아웃을 설정하여 재시도가 가능한 문제에 대해 자동으로 처리하도록 구성합니다.
DLQ를 사용하여 에러가 발생한 메시지를 저장할 때, 메시지에 대한 정보(메시지 ID, 에러 내용 등)를 함께 저장하여 추후에 분석이 용이하도록 합니다.
DLQ를 모니터링하여 재처리해야 하는 메시지의 양을 파악하고 문제를 해결합니다.




